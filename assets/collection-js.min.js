(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?o(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function f(e,t,n){return(f=s()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return f(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,e)})(e)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}var y=function(e){c(s,e);var i,a,u,l=m(s);function s(){var e;return n(this,s),(e=l.call(this)).resetActiveFilter=e.resetActiveFilter.bind(o(e)),e.debouncedOnSubmit=function(e,t){var n,r=this;return function(){for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];clearTimeout(n),n=setTimeout((function(){return e.apply(r,i)}),t)}}((function(t){e.onSubmitHandler(t)}),500),e.querySelector("form").addEventListener("input",e.debouncedOnSubmit.bind(o(e))),e}return i=s,u=[{key:"setListeners",value:function(){window.addEventListener("popstate",(function(e){var t=e.state?e.state.searchParams:s.searchParamsInitial;t!==s.searchParamsPrev&&s.renderPage(t,null,!1)}))}},{key:"updateURLHash",value:function(e){history.pushState({searchParams:e},"","".concat(window.location.pathname).concat(e&&"?".concat(e)))}},{key:"renderProductGridContainer",value:function(e){document.getElementById("ProductsList").innerHTML=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductsList").innerHTML}},{key:"renderProductCount",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").getElementById("ProductsCount").innerHTML;document.getElementById("ProductsCount").innerHTML=t}},{key:"renderFilters",value:function(e,t){(new DOMParser).parseFromString(e,"text/html").querySelectorAll("#FiltersForm .js-filter").forEach((function(e){document.querySelector('.js-filter[data-index="'.concat(e.dataset.index,'"]')).innerHTML=e.innerHTML}))}},{key:"renderSectionFromFetch",value:function(e,n){fetch(e).then((function(e){return e.text()})).then((function(r){var o=r;s.renderProductGridContainer(o),s.data=[].concat(t(s.data),[{html:o,url:e}]),s.renderFilters(o,n),s.renderProductCount(o)}))}},{key:"renderSectionFromCache",value:function(e,t){var n=s.data.find(e).html;s.renderFilters(n,t),s.renderProductGridContainer(n),s.renderProductCount(n)}},{key:"renderPage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s.searchParamsPrev=e;var r=document.getElementById("ProductsList").dataset.id;document.getElementById("ProductsList").querySelector("[data-products-list]").classList.add("loading");var o="".concat(window.location.pathname,"?section_id=").concat(r,"&").concat(e),i=function(e){return e.url===o};s.data.some(i)?s.renderSectionFromCache(i,t):s.renderSectionFromFetch(o,t),n&&s.updateURLHash(e)}}],(a=[{key:"onSubmitHandler",value:function(e){e.preventDefault();var t=new FormData(e.target.closest("form")),n=new URLSearchParams(t).toString();s.renderPage(n,e)}},{key:"resetActiveFilter",value:function(e){e.preventDefault(),s.renderPage(new URL(e.currentTarget.href).searchParams.toString())}}])&&r(i.prototype,a),u&&r(i,u),s}(d(HTMLElement));y.data=[],y.searchParamsInitial=window.location.search.slice(1),y.searchParamsPrev=window.location.search.slice(1),customElements.define("filter-and-sort-form",y),y.setListeners();var p=function(e){c(r,e);var t=m(r);function r(){var e;return n(this,r),(e=t.call(this)).querySelector("a").addEventListener("click",(function(t){t.preventDefault(),(e.closest("filter-and-sort-form")||document.querySelector("filter-and-sort-form")).resetActiveFilter(t)})),e}return r}(d(HTMLElement));function v(){if(window.innerWidth<=768){var e=document.querySelectorAll("[data-mobile-filter-close]");e&&e.length&&e.forEach((function(e){e.addEventListener("click",(function(e){document.querySelector("[data-filters]").classList.remove("open"),document.body.classList.remove("filters-mobile-open")}),!1)}))}}customElements.define("filter-reset",p),document.querySelector("[data-filters-toggler]").addEventListener("click",(function(){var e=document.querySelector("[data-filters]");e&&(window.innerWidth<=768?(e.classList.toggle("open"),document.body.classList.toggle("filters-mobile-open")):e.classList.toggle("close"))}),!1);var h=document.getElementById("SortBy-imitator"),b=document.getElementById("SortBy");function g(){var e=document.getElementById("shopify-section-header");e.classList.contains("sticky-header")&&document.querySelector("[data-filters]")&&(document.querySelector("[data-filters]").style.top=e.offsetHeight+"px")}h.addEventListener("change",(function(e){b.value=e.target.value,b.closest("form").dispatchEvent(new Event("input"))}),!1),window.addEventListener("DOMContentLoaded",(function(){g(),v()})),window.addEventListener("resize",(function(){g(),v()}))})();