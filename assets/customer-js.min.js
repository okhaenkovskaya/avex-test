(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n="[data-customer-addresses]",i="[data-address-country-select]",o="[data-address]",r="button[aria-expanded]",a='button[type="reset"]',c="button[data-confirm-message]",s="aria-expanded",l="data-confirm-message",u=function(){function u(){var e=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t(this,"_handleAddEditButtonClick",(function(t){var n=t.currentTarget;e._toggleExpanded(n)})),t(this,"_handleCancelButtonClick",(function(t){var n=t.currentTarget;e._toggleExpanded(n.closest(o).querySelector("[".concat(s,"]")))})),t(this,"_handleDeleteButtonClick",(function(e){var t=e.currentTarget;confirm(t.getAttribute(l))&&Shopify.postLink(t.dataset.target,{parameters:{_method:"delete"}})})),this.elements=this._getElements(),0!==Object.keys(this.elements).length&&(this._setupCountries(),this._setupEventListeners())}var d,h,f;return d=u,(h=[{key:"_getElements",value:function(){var e=document.querySelector(n);return e?{container:e,addressContainer:e.querySelector(o),toggleButtons:document.querySelectorAll(r),cancelButtons:e.querySelectorAll(a),deleteButtons:e.querySelectorAll(c),countrySelects:e.querySelectorAll(i)}:{}}},{key:"_setupCountries",value:function(){Shopify&&Shopify.CountryProvinceSelector&&(new Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"}),this.elements.countrySelects.forEach((function(e){var t=e.dataset.formId;new Shopify.CountryProvinceSelector("AddressCountry_".concat(t),"AddressProvince_".concat(t),{hideElement:"AddressProvinceContainer_".concat(t)})})))}},{key:"_setupEventListeners",value:function(){var e=this;this.elements.toggleButtons.forEach((function(t){t.addEventListener("click",e._handleAddEditButtonClick)})),this.elements.cancelButtons.forEach((function(t){t.addEventListener("click",e._handleCancelButtonClick)})),this.elements.deleteButtons.forEach((function(t){t.addEventListener("click",e._handleDeleteButtonClick)}))}},{key:"_toggleExpanded",value:function(e){e.setAttribute(s,("false"===e.getAttribute(s)).toString())}}])&&e(d.prototype,h),f&&e(d,f),u}();window.CustomerAddresses=u,void 0===window.Shopify&&(window.Shopify={}),Shopify.bind=function(e,t){return function(){return e.apply(t,arguments)}},Shopify.setSelectorByValue=function(e,t){for(var n=0,i=e.options.length;n<i;n++){var o=e.options[n];if(t==o.value||t==o.innerHTML)return e.selectedIndex=n,n}},Shopify.addListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},Shopify.postLink=function(e,t){var n=(t=t||{}).method||"post",i=t.parameters||{},o=document.createElement("form");for(var r in o.setAttribute("method",n),o.setAttribute("action",e),i){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",r),a.setAttribute("value",i[r]),o.appendChild(a)}document.body.appendChild(o),o.submit(),document.body.removeChild(o)},Shopify.CountryProvinceSelector=function(e,t,n){this.countryEl=document.getElementById(e),this.provinceEl=document.getElementById(t),this.provinceContainer=document.getElementById(n.hideElement||t),Shopify.addListener(this.countryEl,"change",Shopify.bind(this.countryHandler,this)),this.initCountry(),this.initProvince()},Shopify.CountryProvinceSelector.prototype={initCountry:function(){var e=this.countryEl.getAttribute("data-default");Shopify.setSelectorByValue(this.countryEl,e),this.countryHandler()},initProvince:function(){var e=this.provinceEl.getAttribute("data-default");e&&this.provinceEl.options.length>0&&Shopify.setSelectorByValue(this.provinceEl,e)},countryHandler:function(e){var t=(o=this.countryEl.options[this.countryEl.selectedIndex]).getAttribute("data-provinces"),n=JSON.parse(t);if(this.clearOptions(this.provinceEl),n&&0==n.length)this.provinceContainer.style.display="none";else{for(var i=0;i<n.length;i++){var o;(o=document.createElement("option")).value=n[i][0],o.innerHTML=n[i][1],this.provinceEl.appendChild(o)}this.provinceContainer.style.display=""}},clearOptions:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},setOptions:function(e,t){var n=0;for(t.length;n<t.length;n++){var i=document.createElement("option");i.value=t[n],i.innerHTML=t[n],e.appendChild(i)}}}})();